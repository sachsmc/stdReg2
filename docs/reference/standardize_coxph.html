<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Regression standardization in Cox proportional hazards models — standardize_coxph • stdReg2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Regression standardization in Cox proportional hazards models — standardize_coxph"><meta name="description" content='standardize_coxph performs regression standardization in Cox proportional
hazards models at specified values of the exposure over the sample
covariate distribution. Let \(T\), \(X\), and \(Z\) be the survival
outcome, the exposure, and a vector of covariates, respectively.
standardize_coxph fits a Cox proportional hazards model and the Breslow estimator
of the baseline hazard in order to estimate the
standardized survival function \(\theta(t,x)=E\{S(t|X=x,Z)\}\) when measure = "survival" or the standardized restricted mean survival up to time t \(\theta(t, x) = E\{\int_0^t S(u|X = x, Z) du\}\) when measure = "rmean", where
\(t\) is a specific value of \(T\), \(x\) is a specific value of
\(X\), and the expectation is over the marginal distribution of \(Z\).'><meta property="og:description" content='standardize_coxph performs regression standardization in Cox proportional
hazards models at specified values of the exposure over the sample
covariate distribution. Let \(T\), \(X\), and \(Z\) be the survival
outcome, the exposure, and a vector of covariates, respectively.
standardize_coxph fits a Cox proportional hazards model and the Breslow estimator
of the baseline hazard in order to estimate the
standardized survival function \(\theta(t,x)=E\{S(t|X=x,Z)\}\) when measure = "survival" or the standardized restricted mean survival up to time t \(\theta(t, x) = E\{\int_0^t S(u|X = x, Z) du\}\) when measure = "rmean", where
\(t\) is a specific value of \(T\), \(x\) is a specific value of
\(X\), and the expectation is over the marginal distribution of \(Z\).'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">stdReg2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/custom.html">Implementing custom and new methods for standardization</a></li>
    <li><a class="dropdown-item" href="../articles/overview.html">Estimation of causal effects using stdReg2</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sachsmc/stdReg2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Regression standardization in Cox proportional hazards models</h1>
      <small class="dont-index">Source: <a href="https://github.com/sachsmc/stdReg2/blob/HEAD/R/coxph_methods.R" class="external-link"><code>R/coxph_methods.R</code></a></small>
      <div class="d-none name"><code>standardize_coxph.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>standardize_coxph</code> performs regression standardization in Cox proportional
hazards models at specified values of the exposure over the sample
covariate distribution. Let \(T\), \(X\), and \(Z\) be the survival
outcome, the exposure, and a vector of covariates, respectively.
<code>standardize_coxph</code> fits a Cox proportional hazards model and the Breslow estimator
of the baseline hazard in order to estimate the
standardized survival function \(\theta(t,x)=E\{S(t|X=x,Z)\}\) when <code>measure = "survival"</code> or the standardized restricted mean survival up to time t \(\theta(t, x) = E\{\int_0^t S(u|X = x, Z) du\}\) when <code>measure = "rmean"</code>, where
\(t\) is a specific value of \(T\), \(x\) is a specific value of
\(X\), and the expectation is over the marginal distribution of \(Z\).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">standardize_coxph</span><span class="op">(</span></span>
<span>  <span class="va">formula</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">values</span>,</span>
<span>  <span class="va">times</span>,</span>
<span>  measure <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"survival"</span>, <span class="st">"rmean"</span><span class="op">)</span>,</span>
<span>  <span class="va">clusterid</span>,</span>
<span>  ci_level <span class="op">=</span> <span class="fl">0.95</span>,</span>
<span>  ci_type <span class="op">=</span> <span class="st">"plain"</span>,</span>
<span>  contrasts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  family <span class="op">=</span> <span class="st">"gaussian"</span>,</span>
<span>  reference <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  transforms <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-formula">formula<a class="anchor" aria-label="anchor" href="#arg-formula"></a></dt>
<dd><p>The formula which is used to fit the model for the outcome.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>The data.</p></dd>


<dt id="arg-values">values<a class="anchor" aria-label="anchor" href="#arg-values"></a></dt>
<dd><p>A named list or data.frame specifying the variables and values
at which marginal means of the outcome will be estimated.</p></dd>


<dt id="arg-times">times<a class="anchor" aria-label="anchor" href="#arg-times"></a></dt>
<dd><p>A vector containing the specific values of \(T\) at
which to estimate the standardized survival function.</p></dd>


<dt id="arg-measure">measure<a class="anchor" aria-label="anchor" href="#arg-measure"></a></dt>
<dd><p>Either "survival" to estimate the survival function at times
or "rmean" for the restricted mean survival up to the largest of times.</p></dd>


<dt id="arg-clusterid">clusterid<a class="anchor" aria-label="anchor" href="#arg-clusterid"></a></dt>
<dd><p>An optional string containing the name of a cluster identification variable
when data are clustered.</p></dd>


<dt id="arg-ci-level">ci_level<a class="anchor" aria-label="anchor" href="#arg-ci-level"></a></dt>
<dd><p>Coverage probability of confidence intervals.</p></dd>


<dt id="arg-ci-type">ci_type<a class="anchor" aria-label="anchor" href="#arg-ci-type"></a></dt>
<dd><p>A string, indicating the type of confidence intervals.
Either "plain", which gives untransformed intervals, or "log", which gives
log-transformed intervals.</p></dd>


<dt id="arg-contrasts">contrasts<a class="anchor" aria-label="anchor" href="#arg-contrasts"></a></dt>
<dd><p>A vector of contrasts in the following format:
If set to <code>"difference"</code> or <code>"ratio"</code>, then \(\psi(x)-\psi(x_0)\)
or \(\psi(x) / \psi(x_0)\) are constructed, where \(x_0\) is a reference
level specified by the <code>reference</code> argument. Has to be <code>NULL</code>
if no references are specified.</p></dd>


<dt id="arg-family">family<a class="anchor" aria-label="anchor" href="#arg-family"></a></dt>
<dd><p>The family argument which is used to fit the glm model for the outcome.</p></dd>


<dt id="arg-reference">reference<a class="anchor" aria-label="anchor" href="#arg-reference"></a></dt>
<dd><p>A vector of reference levels in the following format:
If <code>contrasts</code> is not <code>NULL</code>, the desired reference level(s). This
must be a vector or list the same length as <code>contrasts</code>, and if not named,
it is assumed that the order is as specified in contrasts.</p></dd>


<dt id="arg-transforms">transforms<a class="anchor" aria-label="anchor" href="#arg-transforms"></a></dt>
<dd><p>A vector of transforms in the following format:
If set to <code>"log"</code>, <code>"logit"</code>, or <code>"odds"</code>, the standardized
mean \(\theta(x)\) is transformed into \(\psi(x)=\log\{\theta(x)\}\),
\(\psi(x)=\log[\theta(x)/\{1-\theta(x)\}]\), or
\(\psi(x)=\theta(x)/\{1-\theta(x)\}\), respectively.
If the vector is <code>NULL</code>, then \(\psi(x)=\theta(x)\).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class <code>std_surv</code>.
This is basically a list with components estimates and covariance estimates in <code>res</code>
Results for transformations, contrasts, references are stored in <code>res_contrasts</code>.
The output contains estimates for contrasts and confidence intervals for all
combinations of transforms and reference levels.
Obtain numeric results in a data frame with the <a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a> function.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>standardize_coxph</code> fits the Cox proportional hazards model
$$\lambda(t|X,Z)=\lambda_0(t)\exp\{h(X,Z;\beta)\}.$$
Breslow's estimator of the cumulative baseline hazard
\(\Lambda_0(t)=\int_0^t\lambda_0(u)du\) is used together with the partial
likelihood estimate of \(\beta\) to obtain estimates of the survival
function \(S(t|X=x,Z)\) if <code>measure = "survival"</code>:
$$\hat{S}(t|X=x,Z)=\exp[-\hat{\Lambda}_0(t)\exp\{h(X=x,Z;\hat{\beta})\}].$$
For each \(t\) in the <code>t</code> argument and for each \(x\) in the
<code>x</code> argument, these estimates are averaged across all subjects (i.e.
all observed values of \(Z\)) to produce estimates
$$\hat{\theta}(t,x)=\sum_{i=1}^n \hat{S}(t|X=x,Z_i)/n,$$ where \(Z_i\)
is the value of \(Z\) for subject \(i\), \(i=1,...,n\).  The variance
for \(\hat{\theta}(t,x)\) is obtained by the sandwich formula.</p>
<p>If <code>measure = "rmean"</code>, then \(\Lambda_0(t)=\int_0^t\lambda_0(u)du\)
is used together with the partial
likelihood estimate of \(\beta\) to obtain estimates of the restricted mean survival
up to time t: \(\int_0^t S(u|X=x,Z) du\) for each element of <code>times</code>. The estimation
and inference is done using the method described in Chen and Tsiatis 2001.
Currently, we can only estimate the difference in RMST for a single binary
exposure. Two separate Cox models are fit for each level of the exposure,
which is expected to be coded as 0/1.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>Standardized survival functions are sometimes referred to as (direct)
adjusted survival functions in the literature.</p>
<p><code>standardize_coxph/standardize_parfrailty</code> does not currently handle time-varying exposures or
covariates.</p>
<p><code>standardize_coxph/standardize_parfrailty</code> internally loops over all values in the <code>t</code> argument.
Therefore, the function will usually be considerably faster if
<code>length(t)</code> is small.</p>
<p>The variance calculation performed by <code>standardize_coxph</code> does not condition on
the observed covariates \(\bar{Z}=(Z_1,...,Z_n)\). To see how this
matters, note that
$$var\{\hat{\theta}(t,x)\}=E[var\{\hat{\theta}(t,x)|\bar{Z}\}]+var[E\{\hat{\theta}(t,x)|\bar{Z}\}].$$
The usual parameter \(\beta\) in a Cox proportional hazards model does not
depend on \(\bar{Z}\). Thus, \(E(\hat{\beta}|\bar{Z})\) is independent
of \(\bar{Z}\) as well (since \(E(\hat{\beta}|\bar{Z})=\beta\)), so that
the term \(var[E\{\hat{\beta}|\bar{Z}\}]\) in the corresponding variance
decomposition for \(var(\hat{\beta})\) becomes equal to 0. However,
\(\theta(t,x)\) depends on \(\bar{Z}\) through the average over the
sample distribution for \(Z\), and thus the term
\(var[E\{\hat{\theta}(t,x)|\bar{Z}\}]\) is not 0, unless one conditions on
\(\bar{Z}\). The variance calculation by Gail and Byar (1986) ignores this
term, and thus effectively conditions on \(\bar{Z}\).</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Chang I.M., Gelman G., Pagano M. (1982). Corrected group prognostic curves
and summary statistics. <em>Journal of Chronic Diseases</em> <b>35</b>,
669-674.</p>
<p>Gail M.H. and Byar D.P. (1986). Variance calculations for direct adjusted
survival curves, with applications to testing for no treatment effect.
<em>Biometrical Journal</em> <b>28</b>(5), 587-599.</p>
<p>Makuch R.W. (1982). Adjusted survival curve estimation using covariates.
<em>Journal of Chronic Diseases</em> <b>35</b>, 437-443.</p>
<p>Sjölander A. (2016). Regression standardization with the R-package stdReg.
<em>European Journal of Epidemiology</em> <b>31</b>(6), 563-574.</p>
<p>Sjölander A. (2018). Estimation of causal effect measures with the R-package
stdReg. <em>European Journal of Epidemiology</em> <b>33</b>(9), 847-858.</p>
<p>Chen, P. Y., Tsiatis, A. A. (2001). Causal inference on the difference of the restricted mean lifetime between two groups. <em>Biometrics</em>, <b>57</b>(4), 1030-1038.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Arvid Sjölander, Adam Brand, Michael Sachs</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">300</span></span></span>
<span class="r-in"><span><span class="va">Z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Zbin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="va">n</span>, <span class="fl">1</span>, <span class="fl">.3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span>, mean <span class="op">=</span> <span class="va">Z</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="cn">T</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="va">n</span>, rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">X</span> <span class="op">+</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">X</span> <span class="op">*</span> <span class="va">Z</span><span class="op">)</span><span class="op">)</span> <span class="co"># survival time</span></span></span>
<span class="r-in"><span><span class="va">C</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Exponential.html" class="external-link">rexp</a></span><span class="op">(</span><span class="va">n</span>, rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">exp</a></span><span class="op">(</span><span class="va">X</span> <span class="op">+</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">X</span> <span class="op">*</span> <span class="va">Z</span><span class="op">)</span><span class="op">)</span> <span class="co"># censoring time</span></span></span>
<span class="r-in"><span><span class="va">fact</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">U</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="cn">T</span>, <span class="va">C</span><span class="op">)</span> <span class="co"># time at risk</span></span></span>
<span class="r-in"><span><span class="va">D</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="cn">T</span> <span class="op">&lt;</span> <span class="va">C</span><span class="op">)</span> <span class="co"># event indicator</span></span></span>
<span class="r-in"><span><span class="va">dd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">Z</span>, <span class="va">Zbin</span>, <span class="va">X</span>, <span class="va">U</span>, <span class="va">D</span>, <span class="va">fact</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fit.std.surv</span> <span class="op">&lt;-</span> <span class="fu">standardize_coxph</span><span class="op">(</span></span></span>
<span class="r-in"><span>  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">U</span>, <span class="va">D</span><span class="op">)</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">Z</span> <span class="op">+</span> <span class="va">X</span> <span class="op">*</span> <span class="va">Z</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">dd</span>,</span></span>
<span class="r-in"><span>  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fit.std.surv</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: Surv(U, D) ~ X + Z + X * Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exposure:  X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Survival functions evaluated at t = 1 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        X Estimate Std.Error lower.0.95 upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X   -1.0    0.750    0.0347      0.682      0.818</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.1 -0.5    0.589    0.0457      0.500      0.679</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.2  0.0    0.401    0.0387      0.325      0.477</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.3  0.5    0.295    0.0351      0.226      0.364</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.4  1.0    0.245    0.0343      0.178      0.312</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: Surv(U, D) ~ X + Z + X * Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exposure:  X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Survival functions evaluated at t = 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        X Estimate Std.Error lower.0.95 upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X   -1.0    0.529    0.0538     0.4238      0.635</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.1 -0.5    0.324    0.0498     0.2264      0.422</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.2  0.0    0.203    0.0349     0.1344      0.271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.3  0.5    0.164    0.0320     0.1015      0.227</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.4  1.0    0.151    0.0311     0.0897      0.211</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: Surv(U, D) ~ X + Z + X * Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exposure:  X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Survival functions evaluated at t = 3 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        X Estimate Std.Error lower.0.95 upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X   -1.0    0.378    0.0631     0.2540      0.501</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.1 -0.5    0.188    0.0432     0.1029      0.272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.2  0.0    0.123    0.0307     0.0626      0.183</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.3  0.5    0.111    0.0287     0.0549      0.167</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.4  1.0    0.110    0.0282     0.0552      0.166</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: Surv(U, D) ~ X + Z + X * Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exposure:  X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Survival functions evaluated at t = 4 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        X Estimate Std.Error lower.0.95 upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X   -1.0   0.2959    0.0662     0.1661      0.426</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.1 -0.5   0.1287    0.0392     0.0519      0.205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.2  0.0   0.0902    0.0288     0.0337      0.147</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.3  0.5   0.0884    0.0273     0.0348      0.142</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.4  1.0   0.0925    0.0272     0.0393      0.146</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: Surv(U, D) ~ X + Z + X * Z</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exposure:  X </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Survival functions evaluated at t = 5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        X Estimate Std.Error lower.0.95 upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X   -1.0   0.2255    0.0657     0.0967      0.354</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.1 -0.5   0.0857    0.0328     0.0214      0.150</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.2  0.0   0.0663    0.0251     0.0170      0.116</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.3  0.5   0.0707    0.0247     0.0223      0.119</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.4  1.0   0.0781    0.0251     0.0288      0.127</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">fit.std.surv</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="standardize_coxph-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fit.std.surv</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         X   Estimate  Std.Error lower.0.95 upper.0.95 time contrast transform</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X    -1.0 0.74957538 0.03473035 0.68150514  0.8176456    1     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.1  -0.5 0.58923837 0.04569250 0.49968272  0.6787940    1     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.2   0.0 0.40080421 0.03870365 0.32494645  0.4766620    1     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.3   0.5 0.29503631 0.03511907 0.22620419  0.3638684    1     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.4   1.0 0.24509832 0.03430180 0.17786802  0.3123286    1     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X1   -1.0 0.52930785 0.05380874 0.42384466  0.6347710    2     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.11 -0.5 0.32403918 0.04979327 0.22644617  0.4216322    2     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.21  0.0 0.20279513 0.03490407 0.13438441  0.2712058    2     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.31  0.5 0.16421470 0.03202055 0.10145557  0.2269738    2     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.41  1.0 0.15059296 0.03105317 0.08972986  0.2114561    2     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X2   -1.0 0.37756823 0.06305952 0.25397385  0.5011626    3     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.12 -0.5 0.18758405 0.04321095 0.10289215  0.2722760    3     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.22  0.0 0.12278095 0.03071049 0.06258949  0.1829724    3     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.32  0.5 0.11114345 0.02869313 0.05490595  0.1673810    3     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.42  1.0 0.11048888 0.02821866 0.05518133  0.1657964    3     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X3   -1.0 0.29592579 0.06624722 0.16608364  0.4257679    4     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.13 -0.5 0.12866612 0.03918314 0.05186858  0.2054637    4     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.23  0.0 0.09021194 0.02881483 0.03373592  0.1466880    4     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.33  0.5 0.08837564 0.02733102 0.03480782  0.1419435    4     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.43  1.0 0.09253934 0.02716367 0.03929953  0.1457792    4     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X4   -1.0 0.22546407 0.06571110 0.09667268  0.3542555    5     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.14 -0.5 0.08572099 0.03280939 0.02141577  0.1500262    5     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.24  0.0 0.06626788 0.02513536 0.01700349  0.1155323    5     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.34  0.5 0.07069841 0.02469322 0.02230060  0.1190962    5     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.44  1.0 0.07810587 0.02513514 0.02884189  0.1273698    5     none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       measure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X    survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.1  survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.2  survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.3  survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.4  survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X1   survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.11 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.21 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.31 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.41 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X2   survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.12 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.22 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.32 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.42 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X3   survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.13 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.23 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.33 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.43 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X4   survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.14 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.24 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.34 survival</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> X.44 survival</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit.std</span> <span class="op">&lt;-</span> <span class="fu">standardize_coxph</span><span class="op">(</span></span></span>
<span class="r-in"><span>  formula <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survival/man/Surv.html" class="external-link">Surv</a></span><span class="op">(</span><span class="va">U</span>, <span class="va">D</span><span class="op">)</span> <span class="op">~</span> <span class="va">X</span> <span class="op">+</span> <span class="va">Zbin</span> <span class="op">+</span> <span class="va">X</span> <span class="op">*</span> <span class="va">Zbin</span> <span class="op">+</span> <span class="va">fact</span>,</span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">dd</span>,</span></span>
<span class="r-in"><span>  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Zbin <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  times <span class="op">=</span> <span class="fl">1.5</span>,</span></span>
<span class="r-in"><span>  measure <span class="op">=</span> <span class="st">"rmean"</span>,</span></span>
<span class="r-in"><span>  contrast <span class="op">=</span> <span class="st">"difference"</span>,</span></span>
<span class="r-in"><span>  reference <span class="op">=</span> <span class="fl">0</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">fit.std</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: Surv(U, D) ~ X + fact</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Fit separately by exposure </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exposure:  Zbin </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Restricted mean survival evaluated at t = 1.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Zbin Estimate Std.Error lower.0.95 upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0    0.716    0.0447      0.628      0.804</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    1    0.667    0.0542      0.561      0.773</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Formula: Surv(U, D) ~ X + fact</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Fit separately by exposure </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Exposure:  Zbin </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Reference level:  = 0 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Contrast:  difference </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Restricted mean survival evaluated at t = 1.5 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Zbin Estimate Std.Error lower.0.95 upper 0.95</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0   0.0000    0.0000      0.000     0.0000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    1  -0.0489    0.0608     -0.168     0.0703</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">fit.std</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Zbin    Estimate  Std.Error lower.0.95 upper.0.95 time   contrast transform</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1    0  0.71593627 0.04471627  0.6282940 0.80357854  1.5       none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2    1  0.66701532 0.05419799  0.5607892 0.77324143  1.5       none  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3    0  0.00000000 0.00000000  0.0000000 0.00000000  1.5 difference  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4    1 -0.04892094 0.06084537 -0.1681757 0.07033379  1.5 difference  identity</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   measure</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   rmean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   rmean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   rmean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   rmean</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael C Sachs, Arvid Sjölander, Erin E Gabriel, Johan Sebastian Ohlendorff, Adam Brand.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

